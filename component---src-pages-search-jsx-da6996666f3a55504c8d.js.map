{"version":3,"sources":["webpack:///./src/images/search/bg.jpg","webpack:///./src/components/shared/search.jsx","webpack:///./src/pages/search.jsx","webpack:///./src/images/blog/no_image_1.png","webpack:///./src/images/blog/no_image_5.png","webpack:///./src/images/blog/no_image_2.png","webpack:///./src/images/blog/no_image_3.png","webpack:///./src/images/blog/no_image_4.png","webpack:///./src/utils/shared.jsx"],"names":["module","exports","Search","state","query","results","componentDidMount","setTimeout","props","location","searchWord","queryHome","input","document","getElementById","setState","setAttribute","searchFromHome","search","event","target","value","length","getSearchResults","homeQuery","render","className","this","classNames","style","backgroundImage","bg","backgroundSize","width","top","duration","cascade","bottom","id","onChange","onInput","autoComplete","minWidth","type","name","placeholder","data","useStaticQuery","map","item","i","imagesrc","allMdx","edges","node","getImageSource","title","shortenText","description","highlightClasses","href","url","rel","key","backgroundPosition","borderRadius","maxWidth","highlightClassName","textToHighlight","searchWords","split","textShadow","author","arr","concat","category","toUpperCase","tag","slice","index","window","__FLEXSEARCH__","en","store","Object","keys","forEach","idx","push","values","suggest","Array","from","Set","filter","includes","Component","searchPage","keywords","text","newText","splice","join","frontmatter","thumbnail","childImageSharp","fluid","src","image_set","no_image_1","no_image_2","no_image_3","no_image_4","no_image_5","Math","floor","random"],"mappings":"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","file":"component---src-pages-search-jsx-da6996666f3a55504c8d.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/bg-d2e315389be310ad1df988334939fa79.jpg\";","import React, { Component } from 'react'\r\nimport { graphql, useStaticQuery } from 'gatsby'\r\nimport PropTypes from \"prop-types\"\r\nimport {FiSearch} from \"react-icons/fi\"\r\nimport Highlighter from 'react-highlight-words';\r\nimport Zoom from 'react-reveal/Zoom'\r\nimport Fade from 'react-reveal/Fade'\r\nimport bg from \"../../images/search/bg.jpg\"\r\nimport { getImageSource, shortenText } from \"../../utils/shared\"\r\n\r\n\r\n// Search component\r\nclass Search extends Component {\r\n\r\n  state = {\r\n    query: '',\r\n    results: [],\r\n  }\r\n\r\n  componentDidMount = () => {\r\n    setTimeout(() => {\r\n      if(this.props.location.state && this.props.location.state.searchWord) {\r\n        var queryHome = this.props.location.state.searchWord\r\n        var input = document.getElementById(\"pageSearch\")\r\n        this.setState({query: queryHome})\r\n        input.setAttribute(\"value\", queryHome)\r\n        this.searchFromHome(queryHome)\r\n      }\r\n    }, 100);\r\n  }\r\n\r\n  render() {\r\n    const ResultList = () => {\r\n      // query length changed from 2 to 0\r\n      if (this.state.results.length > 0 && this.state.query.length > 0) {\r\n        const data = useStaticQuery(graphql`\r\n          query postList {\r\n            allMdx(sort: {fields: [frontmatter___date], order: DESC}) {\r\n              edges {\r\n                node {\r\n                  id\r\n                  frontmatter {\r\n                    date(formatString: \"ddd, DD MMM YYYY\")\r\n                    thumbnail {\r\n                      childImageSharp {\r\n                        fluid {\r\n                          src\r\n                        }\r\n                      }\r\n                    }\r\n                  }\r\n                }\r\n              }\r\n            }\r\n          }\r\n        `)\r\n\r\n        return (\r\n          <div>\r\n            <div className=\"bg-orange-700 text-gray-100 py-2\">Found {this.state.results.length} results for you.</div>\r\n\r\n            <div className=\"flex flex-wrap py-10 xl:pt-32 xl:pb-64 justify-center bg-gray-100\">\r\n              {this.state.results.map((item, i) => {\r\n                let imagesrc\r\n                {data.allMdx.edges.map(({ node }) => {\r\n                  if(item.id == node.id){\r\n                    imagesrc = getImageSource(node);\r\n                  }\r\n                })}\r\n\r\n                let title = shortenText(item.title, 8);\r\n                let description = shortenText(item.description, 30)\r\n                const highlightClasses = \"text-blue-400 bg-black\"\r\n\r\n                return( \r\n\r\n                  <a href={`${item.url}`} target=\"_blank\" rel=\"noopener noreferrer\" key={i}>\r\n                    <div style={{width: \"363px\", backgroundImage: `url(${imagesrc})`, backgroundSize: \"cover\", backgroundPosition: \"center\", borderRadius: \"15px\"}} className=\"group text-left relative shadow-c1 hover:shadow-c2 rounded-lg min-h-50 2xl:min-h-40 mx-6 my-6 transform hover:scale-105 transition duration-500\">\r\n                      <div className=\"min-h-60 2xl:min-h-40 max-h-60 w-full p-6 transition duration-700 bg-black-55 group-hover:bg-black-85\" style={{borderRadius: \"15px\"}}>\r\n                        <div className=\"absolute pt-8 lg:pt-16 2xl:pt-24 overflow-hidden\" style={{maxWidth:\"320px\"}}>\r\n                          <h1 className=\"group-hover:-translate-y-8 text-white font-bold leading-7 text-2xl transform transition duration-100\">\r\n                            <Highlighter highlightClassName={highlightClasses} textToHighlight={title} searchWords={this.state.query.split()} />\r\n                          </h1>  \r\n                          <h1 className=\"group-hover:hidden text-gray-400 leading-7 my-4 font-bold text-lg transition duration-500\" style={{textShadow: \"#000 0px 0px 30px\"}}>\r\n                            {item.author.map((author, i, arr) => {\r\n                              return ( <Highlighter className=\"text-white\" highlightClassName={highlightClasses} textToHighlight={arr.length - 1 === i ? author : author.concat(\", \")} searchWords={this.state.query.split()} key={author} /> )\r\n                            })}\r\n                          </h1>\r\n                          <h1 className=\"group-hover:hidden text-gray-400 font-bold transition duration-500\">\r\n                            CAT: &nbsp;\r\n                            <Highlighter className=\"text-white\" highlightClassName={highlightClasses} textToHighlight={item.category[0].toUpperCase()} searchWords={this.state.query.split()} />\r\n                          </h1>\r\n                          <h1 className=\"group-hover:hidden text-gray-400 font-bold transition duration-500\">\r\n                            TAG: &nbsp;{item.tag.map((tag, i, arr) => {\r\n                              return ( i < 3 && <Highlighter className=\"text-white\" highlightClassName={highlightClasses} textToHighlight={arr.length - 1 === i ? tag.toUpperCase() : tag.toUpperCase().concat(\", \")} searchWords={this.state.query.split()} key={tag} /> )\r\n                            })}\r\n                            {item.tag.length > 3 && <p className=\"inline-block text-white\"> +{item.tag.length - 3} more</p>}\r\n                          </h1>\r\n                          <p className=\"hidden group-hover:block my-4 text-xs text-gray-500 w-full font-semibold transform group-hover:-translate-y-12 transition duration-500\"><Highlighter highlightClassName={highlightClasses} textToHighlight={item.url.slice(5,).toUpperCase()} searchWords={this.state.query.split()} /></p>\r\n                          <h1 className=\"hidden group-hover:block text-white leading-5 text-lg py-3 transform group-hover:-translate-y-12 transition duration-500\"><Highlighter highlightClassName={highlightClasses} textToHighlight={description} searchWords={this.state.query.split()} /></h1>      \r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </a>\r\n                )\r\n                })}\r\n          </div>\r\n         </div>\r\n        )\r\n      } \r\n      // else if (this.state.query.length > 2) {\r\n      //   return (\r\n      //     <div className=\"bg-orange-700 text-gray-100 py-2\">No results for {this.state.query}</div>\r\n      //   )\r\n          \r\n      // } else if (this.state.query.length > 0) {\r\n      //   return (\r\n      //     <div className=\"bg-orange-700 text-gray-100 py-2\">Please insert at least 3 characters</div>\r\n      //   )\r\n      // } \r\n      else if (this.state.query.length > 0) {\r\n        return (\r\n          <div className=\"bg-orange-700 text-gray-100 py-2\">No results for {this.state.query}</div>\r\n        )\r\n      }\r\n      else {\r\n        return (\r\n          <div className=\"bg-orange-700 text-gray-100 py-2\">Awaiting for your input ...</div>\r\n        )\r\n      }\r\n    }\r\n\r\n    return (\r\n      <div className={`${this.props.classNames} relative text-gray-700 w-full text-center`}>\r\n        <div className=\"min-h-60 pt-40 pb-10\" style={{backgroundImage: `url(${bg})`, backgroundSize: \"cover\", width: \"100%\",}}>\r\n          <Zoom top duration={1000} cascade><p className=\"text-2xl xl:text-3xl text-white mb-3 font-semibold\">Search@dataviz.shef</p></Zoom>\r\n          <Fade bottom duration={1500}>\r\n            <div className=\"inline-block focus:outline-none text-gray-600 bg-white shadow p-3 rounded-lg\">\r\n              <FiSearch className=\"inline-block text-center text-3xl -mt-1\" />\r\n              <input id=\"pageSearch\" onChange={this.search} onInput={this.search} autoComplete=\"off\" className=\"search__input py-0 pl-4 text-lg focus:outline-none pr-5 text-gray-600\" style={{minWidth: \"25vw\"}} type=\"text\" name=\"search\" placeholder=\"Search title, description, date...\" />\r\n            </div>\r\n          </Fade>\r\n        </div>\r\n        <div className=\"search__list bg-gray-100\">\r\n          <ResultList />\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  getSearchResults(query) {\r\n    //index - a flexsearch index instance (variables set in gatsby-config)\r\n    //store - object that stores the indexed gatsby nodes where the id of each node corresponds to the id the filter, according with flexsearch.js best practices (https://github.com/nextapps-de/flexsearch#best-practices)).\r\n\r\n    var index = window.__FLEXSEARCH__.en.index\r\n    var store = window.__FLEXSEARCH__.en.store\r\n    if (!query || !index) {\r\n      return []\r\n    } else {\r\n      var results = []\r\n      // search the indexed fields\r\n      Object.keys(index).forEach(idx => {\r\n        results.push(...index[idx].values.search({\r\n          query: query,\r\n          suggest: true,\r\n        }))\r\n      })\r\n      // find the unique ids of the nodes\r\n      results = Array.from(new Set(results))\r\n\r\n      // return the corresponding nodes in the store\r\n      var nodes = store\r\n        .filter(node => (results.includes(node.id) ? node : null))\r\n        .map(node => node.node)\r\n\r\n      return nodes\r\n    }\r\n  }\r\n\r\n  search = (event) => {\r\n    const query = event.target.value\r\n    if (this.state.query.length > -1) {\r\n      const results = this.getSearchResults(query)\r\n      this.setState({ results: results, query: query })\r\n    } else {\r\n      this.setState({ results: [], query: query })\r\n    }\r\n  }\r\n\r\n  searchFromHome = (homeQuery) => {\r\n    const query = homeQuery\r\n    if (this.state.query.length > -1) {\r\n      const results = this.getSearchResults(query)\r\n      this.setState({ results: results, query: query })\r\n    } else {\r\n      this.setState({ results: [], query: query })\r\n    }\r\n  }\r\n}\r\n\r\nexport default Search\r\n\r\n\r\n\r\nSearch.propTypes = {\r\n  classNames: PropTypes.any,\r\n  data: PropTypes.any,\r\n  location: PropTypes.any,\r\n}\r\n\r\n\r\n","import React from \"react\"\r\nimport SEO from \"../components/shared/seo\"\r\nimport Header from \"../components/shared/header\"\r\nimport Footer from \"../components/shared/footer\"\r\n//import BackgroundSection from \"../components/images/search_background\"\r\nimport PropTypes from \"prop-types\"\r\nimport Search from \"../components/shared/search\"\r\n\r\n\r\nconst searchPage = ({location}) => {\r\n\r\n  return (\r\n    <>\r\n      <SEO \r\n        title=\"Search\" \r\n        keywords={[\"the university of sheffield\", \"data visualisation\", \"data visualisation hub\", \"research\", \"dataviz.shef\", \"search dataviz\"]} \r\n      />\r\n      <Header />\r\n      <div className=\"flex flex-wrap\">\r\n        <Search location={location} />\r\n      </div>\r\n      <Footer />\r\n    </>\r\n  )\r\n}\r\n\r\nexport default searchPage\r\n\r\nsearchPage.propTypes = {\r\n    data: PropTypes.any,\r\n    location: PropTypes.any\r\n  }\r\n  \r\n  ","module.exports = __webpack_public_path__ + \"static/no_image_1-cbab1c85fd0b5df4703007ed018da08a.png\";","module.exports = __webpack_public_path__ + \"static/no_image_5-0b0b76e89033963a72b34200d192a851.png\";","module.exports = __webpack_public_path__ + \"static/no_image_2-8588841d1e101e5cd1794737b8392414.png\";","module.exports = __webpack_public_path__ + \"static/no_image_3-5fff908ab0abc7a6edf3a19225c0b9a5.png\";","module.exports = __webpack_public_path__ + \"static/no_image_4-c823d2bf145dd881fe77c9265116b3e8.png\";","import no_image_1 from \"../images/blog/no_image_1.png\"\r\nimport no_image_2 from \"../images/blog/no_image_2.png\"\r\nimport no_image_3 from \"../images/blog/no_image_3.png\"\r\nimport no_image_4 from \"../images/blog/no_image_4.png\"\r\nimport no_image_5 from \"../images/blog/no_image_5.png\"\r\n\r\nexport function shortenText(text, length) {\r\n  let newText = text ? text.split(\" \").splice(0, length) : \"\"\r\n  if(newText.length < length){\r\n    newText = newText.join(\" \")\r\n  } else {\r\n    newText = newText.join(\" \").concat(\" ...\")\r\n  }\r\n  return newText\r\n}\r\n\r\n// Assign thumbnail if not provided\r\nexport function getImageSource(node) {\r\n  let imagesrc\r\n  if(node.frontmatter && node.frontmatter.thumbnail && node.frontmatter.thumbnail.childImageSharp) {\r\n    imagesrc = node.frontmatter.thumbnail.childImageSharp.fluid.src \r\n  } else {\r\n    let image_set = [no_image_1, no_image_2, no_image_3, no_image_4, no_image_5]\r\n    imagesrc = image_set[Math.floor(Math.random() * image_set.length)]\r\n  }\r\n  return imagesrc\r\n}\r\n\r\n\r\n\r\nexport function CopyCode() {\r\n\r\n}\r\n"],"sourceRoot":""}